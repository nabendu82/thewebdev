---
title: My Coding Blog From Scratch Using Gatsby and MDX - 12
slug: coding-blog-gatsby-mdx-12
image: ./gatsby-mdx-12.jpg
date: 2020-02-26
author: Nabendu Biswas
twitter: https://twitter.com/nabendu82
github: https://github.com/nabendu82
dev: https://dev.to/nabendu82
series: Gatsby-mdx
tags: ['gatsby', 'react', 'javascript']
---
import styles from "../css/postTemplate.module.css"

Welcome to part-12 of the series. We will start to add the Search functionality in our blog. There are some gatsby plugin to add the search functionality, but we can add it with plain old react code.

I found [this](https://dev.to/m0nica/how-to-add-search-functionality-to-a-gatsby-blog-4pf2) very good blog by Monica Powell to do it with react code.

Let’s first add the Search Bar by updating the **index.js** file as below. We are adding an input box to capture the user’s input.

![index.js](https://ik.imagekit.io/thewebdev/thewebdev/12/1_LT7P4BxbQA.png)*index.js*

We are using useState hooks and set the default state with query as empty string and filteredData s empty array. You can read more about react hooks in my earlier post [here](https://dev.to/nabendu82/understanding-react-hooks-by-building-a-simple-app-4i6d).

![Default state](https://ik.imagekit.io/thewebdev/thewebdev/12/2_cNbHU20AZ.png)*Default state*

Next, we will do the handleInputChange function. Here, we are capturing the user input in event.target.value. We also have access to all posts in response.allMdx.edges. After that we are using filter to filter through all the posts which either matches the description, title or tags. Since, tags is an array of strings we are using join. After, that we are using setState to reset the query and filteredData and this will re-render the component.

![handleInputChange](https://ik.imagekit.io/thewebdev/thewebdev/12/3_ge7vZxU7xH.png)*handleInputChange*

Next, we are renaming the posts to allPosts. We are doing this so that we can make the value of posts conditional, based on whether the user have entered something in the search bar or need to see all posts.

![allPosts](https://ik.imagekit.io/thewebdev/thewebdev/12/4_HFmP9juqO.png)*allPosts*

Next, we are updating the rendering logic to decide whether to show filteredData or allPosts.

![hasSearchResults](https://ik.imagekit.io/thewebdev/thewebdev/12/5_okbNTxu3cl.png)*hasSearchResults*

I did a mistake as we don’t have any description in our code but excerpt. So, updating the same and also adding author to the filtering logic.

![mistake](https://ik.imagekit.io/thewebdev/thewebdev/12/6_71Hgf6V5KX.png)*mistake*

Let’s also add some styles in home.module.css for our search bar.

![Styles](https://ik.imagekit.io/thewebdev/thewebdev/12/7_p6vGD5cXrX.png)*Styles*

This will show our Search bar as below in our project.

![Search Bar](https://ik.imagekit.io/thewebdev/thewebdev/12/8_zNo9Bb0yOu.png)*Search Bar*

And our Search Bar is fully working now.

![Fully working](https://ik.imagekit.io/thewebdev/thewebdev/12/9_rfeEsENQ2L.gif)*Fully working*

This completes part-12 of the series.

You can find the code for the same in [this](https://github.com/nabendu82/thewebdev-public) github repo.
